# Enrique Cepeda - Bachelor of Science thesis

## A multi-agent system for the automation of configuration and simulation of photovoltaic grid-connected systems

---

The project is organized into the following directories, structured depending on their purpose:

- **Frontend.** Web application constructed with React which lets the user design and visualize the Smart Grid behavior and the energy transactions between the grid buildings.
- **Backend.** Backend API responsible for the roof-top PV panel fitting algorithm, for the PV energy inference module and for the data persistence among other things.
- **Multiagent.** Multiagent system which simulates the energy distribution between the buildings which conforms the Smart Grid.

---

## System Requirements

- Python 3, 3.8.6
- Pip, 20.2.4
- Node, 12.18.2
- Npm, 6.14.8
- Java 8, 1.8 (OpenJDK 8 or JAVA SE 8)
- Apache Maven 3.6.3
- JADE 4, 4.0

---

## Installation process

First, it is necessary to clone the repository.

```bash
git clone --recursive https://github.com/EnriqueCepeda/TFG-EnriqueCepeda.git
```

Afterwards, in the Backend directory, there is a requirements file containing all the dependencies with their exact versions number. These dependencies are meant to be installed in an isolated virtual environment using Python v3.8.6, however, they can also be installed in the system default interpreter. To install the dependencies it is necessary to execute the following commands:

```
pip install -r requirements.txt
pip install -e backend/lib/pvlib-python
```

_P.S: Python and pip must be installed first_

Regarding the Frontend application, the dependencies are also isolated, but instead of installing them with _pip_ package manager, _npm_ must be employed. So, navigate to the frontend directory and run:

```
npm install
```

_P.S: Node Js and npm must be installed first_

Regarding the multiagent system, the installation of certain packages and dependencies is needed. For that _maven_ is used. To install the dependencies navigate to the multiagent folder and run the following command:

```
mvn install
```

_P.S: Maven and Java must be installed first_

Afterwards, set the GOOGLE_MAPS_APIKEY environment variable in your system using the provided value by e-mail. \*(If not, please send an e-mail to ecepedavillamayor@gmail.com)\_. Also add the following environment variables for the multiagent system to work properly:

```
PROJECT_FOLDER="{path_to_repo}/TFG/multiagent"
CLASSPATH="$PROJECT_FOLDER/lib/*:$PROJECT_FOLDER/target/classes:$PROJECT_FOLDER/target/dependency/*"
```

_P.S: The way in which the environment variables are introduced may vary depending on the system, in this case, it was done on a Ubuntu 21.10 machine using zsh shell. The dollar sign ($) references other variable value and the colon divides one value from another._

---

## Run the backend server

The backend server runs using the uvicorn server. In order to run the server, which also launch the Smart Grids when needed, navigate to the backend folder and execute the following command:

```
uvicorn api.main:app --port 8000
```

Lastly, to watch the backend documentation, open a web browser and navigate http://localhost:8000/docs.

## Run the frontend server

Finally, a server is required to serve the frontend application on the browser. To deploy it, navigate to the frontend directory and run the following command:

```
npm build
```

To serve the static files generated by the previous command, run the following command:

```
npm install -g serve
serve -s build
```

These commands install the server and serve it to run it in the browser.
Lastly, to use the application it is necessary to open a web browser and navigate to http://localhost:5000.
