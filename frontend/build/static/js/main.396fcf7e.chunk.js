(this["webpackJsonpopenlayers-map"]=this["webpackJsonpopenlayers-map"]||[]).push([[0],{129:function(e,t,a){e.exports=a.p+"static/media/solar-house.8cb1a1bd.svg"},130:function(e,t,a){e.exports=a.p+"static/media/location.3d0c5526.svg"},131:function(e,t,a){e.exports=a.p+"static/media/area.cab10090.svg"},154:function(e,t,a){e.exports=a.p+"static/media/panel-solar.299b4573.svg"},186:function(e,t,a){e.exports=a(218)},191:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(32),l=a.n(i),c=(a(191),a(69)),o=(a(136),a(192),new r.a.createContext),u=a(161),s=a(256),d=a(258),m=a(243),f=Object(m.a)((function(){return{olMap:{flex:7,overflow:"hidden"}}})),g=function(e){var t=e.children,a=e.zoom,i=e.center,l=f(),m=Object(n.useRef)(),g=Object(n.useState)(null),p=Object(c.a)(g,2),b=p[0],v=p[1];return Object(n.useEffect)((function(){var e={view:new u.a({zoom:a,center:i}),layers:[],controls:[]},t=new s.a(e);return t.setTarget(m.current),v(t),function(){return t.setTarget(void 0)}}),[]),Object(n.useEffect)((function(){b&&b.getView().setZoom(a)}),[a]),Object(n.useEffect)((function(){b&&b.getView().setCenter(i)}),[i]),r.a.createElement(o.Provider,{value:{map:b}},r.a.createElement(d.a,{ref:m,className:l.olMap},t))},p=function(e){var t=e.children;return r.a.createElement("div",null,t)},b=a(159),v=a(261),E=a(7),h=a(83),O=a(142),w=a(124),x=a(41),y=function(e,t,a){return{type:"UPDATE_BUILDING_CONSUMPTION",building_id:e,hour:t,value:a}},j={0:45,1:37,2:29,3:25,4:23,5:21,6:20,7:19,8:18,9:17,10:16,11:15,12:15.5,13:14.5,14:15,15:16,16:17,17:18,18:19,19:20,20:21,21:24.5,22:28,23:38,24:43},C=function(e){return e.buildings},N=function(e,t){return C(e)[t]},D=function(e){var t=C(e),a={};return Object.keys(t).map((function(e,n){"Producer"!==t[e].type&&(a[e]=t[e])})),a},_=a(158),S=function(e){var t=e.defaultStyle,a=e.highlightStyle,r=e.renderZoom,i=e.centerSetter,l=e.zIndex,c=void 0===l?1:l,u=Object(n.useContext)(o).map,s=Object(x.c)(C),d=Object(x.b)();function m(e){u.forEachFeatureAtPixel(e.pixel,(function(e){var n=Object.keys(s),r="Building "+e.getId(),l=n.indexOf(r);if(i(Object(E.l)(u.getView().getCenter())),l<0){var c=e.getGeometry().getInteriorPoint().getCoordinates(),o=Object(E.l)([c[0],c[1]]),m=o[0],f=o[1],g=Object(h.a)(e.getGeometry()).toFixed(2),p=function(e){var t=[];return e.map((function(e){var a=Object(_.a)("EPSG:3857","WGS84",[e[0],e[1]]);t.push(a)})),t}(e.getGeometry().getCoordinates()[0]);d(function(e,t,a,n,r){return{type:"ADD_BUILDING",building_id:e,building_data:{latitude:a,longitude:t,area:n,type:"Consumer & Producer",polygonCoordinates:r,consumption:j}}}(r,m,f,g,p)),e.setStyle(a)}else d({type:"REMOVE_BUILDING",building_id:r}),e.setStyle(t)}))}return Object(n.useEffect)((function(){if(u){var e=new v.a({format:new O.a,loader:function(t,n,r){var i=Object(E.p)(t,r,"EPSG:4326"),l=new XMLHttpRequest;l.open("POST","https://overpass-api.de/api/interpreter"),l.addEventListener("load",(function(){var t=(new O.a).readFeatures(l.responseText,{featureProjection:u.getView().getProjection()});e.addFeatures(t),function(e){Object.keys(s).map((function(t,n){var r=e.getFeatureById(t.replace("Building ",""));null!==r&&r.setStyle(a)}))}(e)}));var c="(way[building]("+(i[1]-.02*i[1]+","+(.02*i[0]+i[0])+","+(.02*i[3]+i[3])+","+(i[2]-.02*i[2]))+");); out meta; >; out meta qt;";l.send(c)},strategy:w.b}),n=new b.a({source:e,style:t,minZoom:r});return u.addLayer(n),n.setZIndex(c),function(){u&&u.removeLayer(n)}}}),[u]),Object(n.useEffect)((function(){if(u)return u.addEventListener("singleclick",m),function(){u&&u.removeEventListener("singleclick",m)}}),[u,s]),null},I=a(160),L=function(e){var t=e.source,a=e.zIndex,r=void 0===a?0:a,i=Object(n.useContext)(o).map;return Object(n.useEffect)((function(){if(i){var e=new I.a({source:t,zIndex:r});return i.addLayer(e),e.setZIndex(r),function(){i&&i.removeLayer(e)}}}),[i]),null},B=a(257);var z=function(){return new B.a},T=function(e){var t=e.children;return r.a.createElement("div",null,t)},R=a(148),G=function(){var e=Object(n.useContext)(o).map;return Object(n.useEffect)((function(){if(e){var t=new R.a({});return e.controls.push(t),function(){return e.controls.remove(t)}}}),[e]),null},k=a(107),P=function(){var e=Object(n.useContext)(o).map;return Object(n.useEffect)((function(){if(e){var t=new k.a({});return e.controls.push(t),function(){return e.controls.remove(t)}}}),[e]),null},F=a(95),U=a.n(F),A=a(154),V=a.n(A),q=a(129),H=a.n(q),M=a(130),Z=a.n(M),W=a(131),X=a.n(W),J=a(263),Y=a(249),$=a(245),K=a(247),Q=a(246),ee=a(104),te=a(266),ae=a(248),ne=Object(m.a)((function(){return{sizeBuilding:{height:50,width:50},sizeAvatar:{height:30,width:30,marginRight:5},card:{display:"flex",marginLeft:"10px",marginRight:"10px",marginTop:"10px",marginBottom:"10px"},leftContent:{flex:1},rightContent:{display:"flex",flexDirection:"column",flex:3,justifyContent:"space-evenly"},cardContentRow:{display:"flex",flexDirection:"row",margin:"5px"}}}));var re=function(e){var t=e.ol_uid,a=e.centerSetter,n=(e.zoomSetter,ne()),i=Object(x.c)((function(e){return N(e,t)})),l=Object(x.b)();return r.a.createElement($.a,{variant:"outlined",className:n.card},r.a.createElement("div",{className:n.leftContent},r.a.createElement(Q.a,{avatar:function(e){switch(e){case"Consumer":return r.a.createElement(J.a,{variant:"square",className:n.sizeBuilding,src:U.a});case"Producer":return r.a.createElement(J.a,{variant:"square",className:n.sizeBuilding,src:V.a});case"Consumer & Producer":return r.a.createElement(J.a,{variant:"square",className:n.sizeBuilding,src:H.a});default:return r.a.createElement(J.a,{variant:"square",className:n.sizeBuilding,src:U.a})}}(i.type)}," "),r.a.createElement(K.a,null,r.a.createElement(te.a,{exclusive:!0,value:i.type,onChange:function(e,a){null!=a&&l({type:"UPDATE_BUILDING_TYPE",building_id:t,building_type:a})},"aria-label":"building type"},r.a.createElement(ae.a,{value:"Consumer","aria-label":"left aligned"}," ",""," "),r.a.createElement(ae.a,{value:"Producer","aria-label":"centered"}," ",""," "),r.a.createElement(ae.a,{value:"Consumer & Producer","aria-label":"right aligned"}," ",""," ")))),r.a.createElement(Y.a,{onClick:function(){a([i.longitude,i.latitude])}},r.a.createElement(K.a,{className:n.rightContent},r.a.createElement("div",{className:n.cardContentRow},r.a.createElement(J.a,{className:n.sizeAvatar,variant:"square",src:Z.a}),r.a.createElement(ee.a,null," Lat ",i.latitude.toFixed(4),", Lon ",i.longitude.toFixed(4)," ")),r.a.createElement("div",{className:n.cardContentRow},r.a.createElement(J.a,{className:n.sizeAvatar,variant:"square",src:X.a}),r.a.createElement(ee.a,null," ",i.area," m\xb2 ")),r.a.createElement("div",{className:n.cardContentRow},r.a.createElement(ee.a,null," ",i.type," ")))))},ie=a(57),le=a(162),ce=a(155),oe=a(251),ue=a(250),se=a(85),de=Object(m.a)((function(){return{buildingContainer:{flex:2,display:"flex",flexDirection:"column"},buildingList:{flex:12},buildingDetailButton:{flex:1,height:"100%",width:"100%"}}})),me=function(e){var t=e.style,a=Object(le.a)(e,["style"]);return r.a.createElement("div",Object.assign({style:Object(ie.a)(Object(ie.a)({},t),{borderRadius:6,backgroundColor:"rgba(35, 49, 86, 0.8)"})},a))},fe=function(e){return r.a.createElement(ce.Scrollbars,Object.assign({renderThumbHorizontal:me,renderThumbVertical:me},e))};var ge=function(e){var t=e.centerSetter,a=e.zoomSetter,n=de(),i=Object(x.c)(C);return r.a.createElement("div",{className:n.buildingContainer},r.a.createElement("div",{className:n.buildingList},r.a.createElement(fe,{autoHide:!0,autoHideTimeout:500,autoHideDuration:200},r.a.createElement(ee.a,{variant:"h5",align:"center"}," SELECTED BUILDINGS "),r.a.createElement(ue.a,{variant:"middle"}),Object.keys(i).map((function(e,n){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(re,{ol_uid:e,centerSetter:t,zoomSetter:a}))})))),r.a.createElement("div",{className:n.buildingDetailButton},r.a.createElement(oe.a,{color:"primary",component:se.b,to:"/detail",fullWidth:!0},"grid detail")))},pe=a(143),be=a(103),ve=a(134),Ee=a(252),he=a(253),Oe=a(259),we=a(254),xe=a(262),ye=a(255),je=a(156),Ce=a.n(je),Ne=[{label:"GRID DESIGNER",href:"/"},{label:"GRID DETAIL",href:"/detail"}],De=Object(m.a)((function(){return{header:{backgroundColor:"#5f468a",paddingLeft:"20px","@media (max-width: 900px)":{paddingLeft:0}},logo:{color:"#FFFEFE",textAlign:"left",marginRight:"25px"},menuButton:{fontFamily:"Open Sans, sans-serif",size:"18px",marginLeft:"10px"},toolbar:{display:"flex"},drawerContainer:{padding:"20px 30px"}}}));function _e(e){var t=e.title,a=De(),i=a.header,l=a.logo,o=a.menuButton,u=a.toolbar,s=a.drawerContainer,d=Object(n.useState)({mobileView:!1,drawerOpen:!1}),m=Object(c.a)(d,2),f=m[0],g=m[1],p=f.mobileView,b=f.drawerOpen;Object(n.useEffect)((function(){var e=function(){return window.innerWidth<900?g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{mobileView:!0})})):g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{mobileView:!1})}))};e(),window.addEventListener("resize",(function(){return e()}))}),[]);var v=function(){return Ne.map((function(e){var t=e.label,a=e.href;return r.a.createElement(we.a,{component:se.b,to:a,color:"inherit",style:{textDecoration:"none"},key:t},r.a.createElement(xe.a,null,t))}))},E=r.a.createElement(ee.a,{variant:"h6",component:"h1",className:l},t.toUpperCase()),h=function(){return Ne.map((function(e){var t=e.label,a=e.href;return r.a.createElement(oe.a,{key:t,color:"inherit",to:a,component:se.b,className:o},t)}))};return r.a.createElement("header",null,r.a.createElement(ye.a,{className:i},p?r.a.createElement(Ee.a,null,r.a.createElement(he.a,{edge:"start",color:"inherit","aria-label":"menu","aria-haspopup":"true",onClick:function(){return g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{drawerOpen:!0})}))}},r.a.createElement(Ce.a,null)),r.a.createElement(Oe.a,{anchor:"left",open:b,onClose:function(){return g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{drawerOpen:!1})}))}},r.a.createElement("div",{className:s},v())),r.a.createElement("div",null,E)):r.a.createElement(Ee.a,{className:u},E,r.a.createElement("div",null,h()))),r.a.createElement(Ee.a,null))}var Se=Object(m.a)((function(e){return{GridDesigner:{height:"100%",width:"100%"},Content:{height:"92%",width:"98%",marginTop:"1vh",marginBottom:"1vh",marginLeft:"1vw",marginRight:"1vw",overflow:"hidden",display:"flex",flexDirection:"row"}}})),Ie={Default:new pe.b({zIndex:1,stroke:new be.a({color:"rgba(246, 207, 101, 1.0)",width:1}),fill:new ve.a({color:"rgba(255, 242, 175, 0.5)"})}),BuildingHighlight:new pe.b({zIndex:2,stroke:new be.a({color:"rgb(95,70,138)",width:2}),fill:new ve.a({color:"rgba(255,255,255,0.7)"})})},Le=function(){var e=Object(n.useState)([-3.92907,38.98626]),t=Object(c.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)(18),o=Object(c.a)(l,2),u=o[0],s=o[1],d=Se();return r.a.createElement("div",{className:d.GridDesigner},r.a.createElement(_e,{title:"Grid designer"}," "),r.a.createElement("div",{className:d.Content},r.a.createElement(g,{center:Object(E.d)(a),zoom:u},r.a.createElement(p,null,r.a.createElement(L,{source:z(),zIndex:0}),r.a.createElement(S,{defaultStyle:Ie.Default,highlightStyle:Ie.BuildingHighlight,renderZoom:17,centerSetter:i})),r.a.createElement(T,null,r.a.createElement(G,null),r.a.createElement(P,null))),r.a.createElement(ge,{centerSetter:i,zoomSetter:s})))},Be=a(16),ze=a(264),Te=a(260),Re=Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"3vw"},slider:{height:"19vh",marginTop:12.5},input:{marginTop:5,marginLeft:4}}})),Ge=Object(Be.a)({root:{color:"#5F468A"},thumb:{width:"23px !important",height:"23px !important",backgroundColor:"#fff",border:"2px solid currentColor","&:focus, &:hover,&:active":{boxShadow:"none !important"}},track:{width:"12.5px !important",borderRadius:"0 0 24px 24px",marginBottom:"-2px"},rail:{width:"10px !important",borderRadius:24,opacity:1,color:"rgba(255, 242, 175, 1)",border:"1px solid rgba(246, 207, 101)"}})(ze.a);function ke(e){var t=e.ol_uid,a=e.hour,n=e.marginTitle,i=e.initialValue,l=Re(),o=r.a.useState(i),u=Object(c.a)(o,2),s=u[0],d=u[1],m=Object(x.b)();return r.a.createElement("div",{className:l.root},r.a.createElement(ee.a,{style:{marginLeft:n}}," ",a,"h "),r.a.createElement("div",{className:l.slider},r.a.createElement(Ge,{orientation:"vertical","aria-label":"consumption slider",defaultValue:0,value:"number"===typeof s?s:0,onChange:function(e,t){d(t)},onChangeCommitted:function(e,n){m(y(t,a,n))}})),r.a.createElement("div",{className:l.input},r.a.createElement(Te.a,{className:l.input,value:s,margin:"dense",onChange:function(e){var n="";""!==e.target.value&&(n=Number(e.target.value)),d(n),m(y(t,a,n))},onBlur:function(){s<0?(d(0),m(y(t,a,0))):s>100&&(d(100),m(y(t,a,100)))},inputProps:{step:1,min:0,max:100,type:"number","aria-labelledby":"input-slider"}})))}var Pe=Object(m.a)((function(){return{sizeBuilding:{height:50,width:50,marginTop:15,marginLeft:"auto",marginRight:"auto"},sizeAvatar:{height:30,width:30,marginRight:5},detailCard:{marginLeft:"10px",marginRight:"10px",marginTop:"10px",marginBottom:"10px",display:"inline-block"},cardHeader:{flexGrow:1},cardContent:{display:"flex"},cardContentRow:{display:"flex",margin:"5px",marginBottom:"15px"},typographyStyle:{flexGrow:1},sliders:{display:"flex",height:"25vh"}}}));function Fe(e){var t=e.ol_uid,a=Object(x.c)((function(e){return N(e,t)})),n=Object(x.c)((function(e){return function(e,t){return C(e)[t].consumption}(e,t)})),i=Pe();return r.a.createElement($.a,{variant:"outlined",className:i.detailCard},r.a.createElement("div",{className:i.cardContent},r.a.createElement($.a,null,function(e){switch(e){case"Consumer":return r.a.createElement(J.a,{variant:"square",className:i.sizeBuilding,src:U.a});case"Consumer & Producer":return r.a.createElement(J.a,{variant:"square",className:i.sizeBuilding,src:H.a});default:return r.a.createElement(J.a,{variant:"square",className:i.sizeBuilding,src:U.a})}}(a.type),r.a.createElement(K.a,null,r.a.createElement("div",{className:i.cardContentRow},r.a.createElement(ee.a,{className:i.typographyStyle,align:"center"}," ",a.type)),r.a.createElement("div",{className:i.cardContentRow},r.a.createElement(J.a,{className:i.sizeAvatar,variant:"square",src:Z.a}),r.a.createElement(ee.a,null," Lat ",a.latitude.toFixed(4),", Lon ",a.longitude.toFixed(4)," ")),r.a.createElement("div",{className:i.cardContentRow},r.a.createElement(J.a,{className:i.sizeAvatar,variant:"square",src:X.a}),r.a.createElement(ee.a,null," ",a.area," m\xb2 ")))),r.a.createElement(K.a,{className:i.sliders},function(){for(var e=[],a=0;a<=24;a++){var i=3;a<=9&&(i=8),e.push(r.a.createElement(r.a.Fragment,{key:a}," ",r.a.createElement(ke,{ol_uid:t,hour:a,marginTitle:i,initialValue:n[a]})," "))}return e}())))}var Ue=Fe=r.a.memo(Fe);function Ae(){var e=Object(x.c)(D);return r.a.createElement("div",null,Object.keys(e).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(Ue,{ol_uid:e}))})))}var Ve=Object(m.a)((function(e){return{GridDesigner:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},Content:{height:"93%",width:"100%",overflow:"hidden",display:"flex"}}})),qe=function(){var e=Ve();return r.a.createElement("div",{className:e.GridDesigner},r.a.createElement(_e,{title:"Grid detail"}),r.a.createElement(Ae,null))},He=a(34);function Me(){return r.a.createElement(se.a,null,r.a.createElement(He.c,null,r.a.createElement(He.a,{path:"/detail",component:qe}),r.a.createElement(He.a,{path:"/",component:Le})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ze=a(79),We=a(157),Xe={"Building 558237030":{latitude:38.98695700026889,longitude:-3.928070645675773,area:"995.25",type:"Consumer & Producer",polygonCoordinates:[[-3.9282782000000003,38.9868703],[-3.9281011000000006,38.98676190000001],[-3.927859700000001,38.98696619999996],[-3.927954,38.98705169999999],[-3.9279771,38.98702969999997],[-3.9280001,38.987044799999985],[-3.9279753000000004,38.987070899999985],[-3.9280674,38.98714660000001],[-3.9282461000000004,38.9871521],[-3.9282514,38.987112200000006],[-3.9282302000000002,38.98711079999999],[-3.9282302000000002,38.98707919999999],[-3.9282601999999995,38.98707919999999],[-3.9282613,38.98706709999998],[-3.9282763000000003,38.98689179999999],[-3.9282782000000003,38.9868703]],consumption:{0:45,1:37,2:29,3:25,4:23,5:21,6:20,7:19,8:18,9:17,10:16,11:15,12:15.5,13:14.5,14:15,15:16,16:17,17:18,18:19,19:20,20:21,21:24.5,22:28,23:38,24:43}}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_BUILDING_TYPE":var a=Object.assign({},e);return a[t.building_id].type=t.building_type,a;case"UPDATE_BUILDING_CONSUMPTION":var n=Object.assign({},e);return n[t.building_id].consumption[t.hour]=t.value,n;case"ADD_BUILDING":var r=Object.assign({},e);return r[t.building_id]=t.building_data,r;case"REMOVE_BUILDING":var i=Object.assign({},e);return delete i[t.building_id],i;default:return e}},Ye=Object(Ze.c)({buildings:Je}),$e=[We.a],Ke=Object(Ze.e)(Ye,{},Object(Ze.d)(Ze.a.apply(void 0,$e),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));l.a.render(r.a.createElement(x.a,{store:Ke},r.a.createElement(r.a.StrictMode,null,r.a.createElement(Me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){e.exports=a.p+"static/media/house.8680c64b.svg"}},[[186,1,2]]]);
//# sourceMappingURL=main.396fcf7e.chunk.js.map