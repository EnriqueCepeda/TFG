{"ast":null,"code":"var _jsxFileName = \"/home/enrique/projects/prueba/src/Map/Map.js\";\nimport React, { useRef, useState, useEffect } from \"react\";\nimport MapContext from \"./MapContext\";\nimport { View as olView, Map as olMap } from \"ol\";\nimport { Box } from \"@material-ui/core\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { fromLonLat } from 'ol/proj';\nconst useStyles = makeStyles(() => ({\n  olMap: {\n    flex: 7,\n    overflow: \"hidden\"\n  }\n}));\n\nconst Map = ({\n  children\n}) => {\n  const classes = useStyles();\n  const mapRef = useRef();\n  const [map, setMap] = useState(null);\n  const [center, setCenter] = useState();\n  const [zoom, setZoom] = useState(18); // on component mount\n\n  useEffect(() => {\n    let options = {\n      view: new olView({\n        zoom,\n        center\n      }),\n      projection: 'EPSG:4326',\n      layers: [],\n      controls: [],\n      overlays: []\n    };\n    let mapObject = new olMap(options);\n    mapObject.setTarget(mapRef.current);\n    setMap(mapObject);\n    return () => mapObject.setTarget(undefined);\n  }, []); // zoom change handler\n\n  useEffect(() => {\n    if (!map) return;\n    map.getView().setZoom(zoom);\n  }, [zoom]); // center change handler\n\n  useEffect(() => {\n    if (!map) return;\n    map.getView().setCenter(center);\n  }, [center]);\n  return /*#__PURE__*/React.createElement(MapContext.Provider, {\n    value: {\n      map\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    ref: mapRef,\n    className: classes.olMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }\n  }, children));\n};\n\nexport default Map;","map":{"version":3,"sources":["/home/enrique/projects/prueba/src/Map/Map.js"],"names":["React","useRef","useState","useEffect","MapContext","View","olView","Map","olMap","Box","makeStyles","fromLonLat","useStyles","flex","overflow","children","classes","mapRef","map","setMap","center","setCenter","zoom","setZoom","options","view","projection","layers","controls","overlays","mapObject","setTarget","current","undefined","getView"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,IAAI,IAAIC,MAAjB,EAAyBC,GAAG,IAAIC,KAAhC,QAA6C,IAA7C;AACA,SAASC,GAAT,QAAoB,mBAApB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,UAAT,QAA2B,SAA3B;AAEA,MAAMC,SAAS,GAAGF,UAAU,CAAC,OAAO;AACnCF,EAAAA,KAAK,EAAE;AACNK,IAAAA,IAAI,EAAE,CADA;AAENC,IAAAA,QAAQ,EAAE;AAFJ;AAD4B,CAAP,CAAD,CAA5B;;AAOA,MAAMP,GAAG,GAAG,CAAC;AAAEQ,EAAAA;AAAF,CAAD,KAAkB;AAC7B,QAAMC,OAAO,GAAGJ,SAAS,EAAzB;AACA,QAAMK,MAAM,GAAGhB,MAAM,EAArB;AACA,QAAM,CAACiB,GAAD,EAAMC,MAAN,IAAgBjB,QAAQ,CAAC,IAAD,CAA9B;AACA,QAAM,CAACkB,MAAD,EAASC,SAAT,IAAsBnB,QAAQ,EAApC;AACA,QAAM,CAACoB,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAAC,EAAD,CAAhC,CAL6B,CAQ7B;;AACAC,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIqB,OAAO,GAAG;AACbC,MAAAA,IAAI,EAAE,IAAInB,MAAJ,CAAW;AAAEgB,QAAAA,IAAF;AAAQF,QAAAA;AAAR,OAAX,CADO;AAEbM,MAAAA,UAAU,EAAE,WAFC;AAGbC,MAAAA,MAAM,EAAE,EAHK;AAIbC,MAAAA,QAAQ,EAAE,EAJG;AAKbC,MAAAA,QAAQ,EAAE;AALG,KAAd;AAOA,QAAIC,SAAS,GAAG,IAAItB,KAAJ,CAAUgB,OAAV,CAAhB;AACAM,IAAAA,SAAS,CAACC,SAAV,CAAoBd,MAAM,CAACe,OAA3B;AACAb,IAAAA,MAAM,CAACW,SAAD,CAAN;AAEA,WAAO,MAAMA,SAAS,CAACC,SAAV,CAAoBE,SAApB,CAAb;AACA,GAbQ,EAaN,EAbM,CAAT,CAT6B,CAwB7B;;AACA9B,EAAAA,SAAS,CAAC,MAAM;AACf,QAAI,CAACe,GAAL,EAAU;AAEVA,IAAAA,GAAG,CAACgB,OAAJ,GAAcX,OAAd,CAAsBD,IAAtB;AACA,GAJQ,EAIN,CAACA,IAAD,CAJM,CAAT,CAzB6B,CA+B7B;;AACAnB,EAAAA,SAAS,CAAC,MAAM;AACf,QAAI,CAACe,GAAL,EAAU;AAEVA,IAAAA,GAAG,CAACgB,OAAJ,GAAcb,SAAd,CAAwBD,MAAxB;AACA,GAJQ,EAIN,CAACA,MAAD,CAJM,CAAT;AAMA,sBACC,oBAAC,UAAD,CAAY,QAAZ;AAAqB,IAAA,KAAK,EAAE;AAAEF,MAAAA;AAAF,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,GAAD;AAAK,IAAA,GAAG,EAAED,MAAV;AAAkB,IAAA,SAAS,EAAED,OAAO,CAACR,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEO,QADF,CADD,CADD;AAOA,CA7CD;;AA+CA,eAAeR,GAAf","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\"\nimport MapContext from \"./MapContext\";\nimport { View as olView, Map as olMap } from \"ol\";\nimport { Box } from \"@material-ui/core\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { fromLonLat } from 'ol/proj';\n\nconst useStyles = makeStyles(() => ({\n\tolMap: {\n\t\tflex: 7,\n\t\toverflow: \"hidden\"\n\t},\n}));\n\nconst Map = ({ children }) => {\n\tconst classes = useStyles();\n\tconst mapRef = useRef();\n\tconst [map, setMap] = useState(null);\n\tconst [center, setCenter] = useState();\n\tconst [zoom, setZoom] = useState(18);\n\n\n\t// on component mount\n\tuseEffect(() => {\n\t\tlet options = {\n\t\t\tview: new olView({ zoom, center }),\n\t\t\tprojection: 'EPSG:4326',\n\t\t\tlayers: [],\n\t\t\tcontrols: [],\n\t\t\toverlays: []\n\t\t};\n\t\tlet mapObject = new olMap(options);\n\t\tmapObject.setTarget(mapRef.current);\n\t\tsetMap(mapObject);\n\n\t\treturn () => mapObject.setTarget(undefined);\n\t}, []);\n\n\t// zoom change handler\n\tuseEffect(() => {\n\t\tif (!map) return;\n\n\t\tmap.getView().setZoom(zoom);\n\t}, [zoom]);\n\n\t// center change handler\n\tuseEffect(() => {\n\t\tif (!map) return;\n\n\t\tmap.getView().setCenter(center)\n\t}, [center])\n\n\treturn (\n\t\t<MapContext.Provider value={{ map }}>\n\t\t\t<Box ref={mapRef} className={classes.olMap}>\n\t\t\t\t{children}\n\t\t\t</Box>\n\t\t</MapContext.Provider>\n\t)\n}\n\nexport default Map;"]},"metadata":{},"sourceType":"module"}