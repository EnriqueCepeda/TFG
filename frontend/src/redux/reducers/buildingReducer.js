
import { ADD_BUILDING, REMOVE_BUILDING, UPDATE_BUILDING_TYPE, UPDATE_BUILDING_CONSUMPTION, ADD_TRANSACTION, UPDATE_BUILDING_ADDRESS } from '../actions/types';
import _ from "lodash";


let initialState = {
    "Building 558237035": {
        "latitude": 38.987249200565685,
        "longitude": -3.9278519158537764,
        "address": "Latitude: 38.98724920 \n Longitude: -3.92785192",
        "transactions": {},
        "area": "1432.30",
        "type": "Prosumer",
        "coordinates": [
            [
                -3.927859700000001,
                38.98696619999996
            ],
            [
                -3.9275661000000004,
                38.98722009999998
            ],
            [
                -3.9276408000000003,
                38.987272700000005
            ],
            [
                -3.9276804999999997,
                38.987236399999986
            ],
            [
                -3.9278626000000005,
                38.98753219999999
            ],
            [
                -3.9279081,
                38.9875141
            ],
            [
                -3.9279584000000005,
                38.98749409999999
            ],
            [
                -3.927928,
                38.98745959999999
            ],
            [
                -3.9281116,
                38.98737629999999
            ],
            [
                -3.9280019,
                38.987256599999995
            ],
            [
                -3.9280497,
                38.98723049999998
            ],
            [
                -3.9280160000000004,
                38.98720850000001
            ],
            [
                -3.9280674,
                38.98714660000001
            ],
            [
                -3.9279753000000004,
                38.987070899999985
            ],
            [
                -3.927954,
                38.98705169999999
            ],
            [
                -3.927859700000001,
                38.98696619999996
            ]
        ],
        "flatCoordinates": [
            [
                -437247.34171142033,
                4719804.764487422
            ],
            [
                -437214.6583089234,
                4719841.126851659
            ],
            [
                -437222.97387488565,
                4719848.65999266
            ],
            [
                -437227.3932586701,
                4719843.461265476
            ],
            [
                -437247.66453794367,
                4719885.824524953
            ],
            [
                -437252.7295747747,
                4719883.232312309
            ],
            [
                -437258.32894516166,
                4719880.367989713
            ],
            [
                -437254.94483264146,
                4719875.42703514
            ],
            [
                -437275.38309115113,
                4719863.497146052
            ],
            [
                -437263.1713430111,
                4719846.35422077
            ],
            [
                -437268.492414671,
                4719842.616293542
            ],
            [
                -437264.74094783136,
                4719839.46555136
            ],
            [
                -437270.46276965813,
                4719830.600513826
            ],
            [
                -437260.210244556,
                4719819.759113353
            ],
            [
                -437257.83913940215,
                4719817.009380864
            ],
            [
                -437247.34171142033,
                4719804.764487422
            ]
        ],
        "consumption": [
            4.5,
            3.7,
            2.9,
            2.5,
            2.3,
            2.1,
            2,
            1.9,
            1.8,
            1.7,
            1.6,
            1.5,
            1.5,
            1.4,
            1.5,
            1.6,
            1.7,
            1.8,
            1.9,
            2.1,
            2.3,
            2.6,
            3.2,
            3.7
        ]
    },
    "Building 558237034": {
        "latitude": 38.987269850290346,
        "longitude": -3.9281868126457096,
        "address": "Latitude: 38.98726985 \n Longitude: -3.92818681",
        "transactions": {},
        "area": "879.34",
        "type": "Producer",
        "coordinates": [
            [
                -3.928377,
                38.98707639999999
            ],
            [
                -3.9283469,
                38.98741069999999
            ],
            [
                -3.9282815000000006,
                38.98740659999997
            ],
            [
                -3.9282372000000003,
                38.98742720000002
            ],
            [
                -3.9282178000000005,
                38.98739969999999
            ],
            [
                -3.928168200000001,
                38.98741209999998
            ],
            [
                -3.9281948,
                38.9874396
            ],
            [
                -3.9281010000000003,
                38.98747259999998
            ],
            [
                -3.9281116,
                38.98737629999999
            ],
            [
                -3.9280019,
                38.987256599999995
            ],
            [
                -3.9280497,
                38.98723049999998
            ],
            [
                -3.9280160000000004,
                38.98720850000001
            ],
            [
                -3.9280674,
                38.98714660000001
            ],
            [
                -3.9282461000000004,
                38.9871521
            ],
            [
                -3.9282514,
                38.987112200000006
            ],
            [
                -3.9282815000000006,
                38.987112200000006
            ],
            [
                -3.928283200000001,
                38.98707989999999
            ],
            [
                -3.9282601999999995,
                38.98707919999999
            ],
            [
                -3.9282613,
                38.98706709999998
            ],
            [
                -3.928377,
                38.98707639999999
            ]
        ],
        "flatCoordinates": [
            [
                -437304.92728400766,
                4719820.546797278
            ],
            [
                -437301.5765673348,
                4719868.423773217
            ],
            [
                -437294.296272637,
                4719867.836587875
            ],
            [
                -437289.3648191948,
                4719870.786836519
            ],
            [
                -437287.2052210734,
                4719866.848397993
            ],
            [
                -437281.6837743301,
                4719868.624275535
            ],
            [
                -437284.64487278514,
                4719872.562714752
            ],
            [
                -437274.20310454874,
                4719877.288843825
            ],
            [
                -437275.38309115113,
                4719863.497146052
            ],
            [
                -437263.1713430111,
                4719846.35422077
            ],
            [
                -437268.492414671,
                4719842.616293542
            ],
            [
                -437264.74094783136,
                4719839.46555136
            ],
            [
                -437270.46276965813,
                4719830.600513826
            ],
            [
                -437290.3555626628,
                4719831.38819859
            ],
            [
                -437290.945555964,
                4719825.673905042
            ],
            [
                -437294.296272637,
                4719825.673905042
            ],
            [
                -437294.4855157713,
                4719821.048050715
            ],
            [
                -437291.925167483,
                4719820.947800025
            ],
            [
                -437292.0476189229,
                4719819.214895405
            ],
            [
                -437304.92728400766,
                4719820.546797278
            ]
        ],
        "consumption": [
            4.5,
            3.7,
            2.9,
            2.5,
            2.3,
            2.1,
            2,
            1.9,
            1.8,
            1.7,
            1.6,
            1.5,
            1.5,
            1.4,
            1.5,
            1.6,
            1.7,
            1.8,
            1.9,
            2.1,
            2.3,
            2.6,
            3.2,
            3.7
        ]
    },
    "Building 558237030": {
        "latitude": 38.98695700026889,
        "longitude": -3.928070645675773,
        "address": "Latitude: 38.98695700 \n Longitude: -3.92807065",
        "transactions": {},
        "area": "995.25",
        "type": "Consumer",
        "coordinates": [
            [
                -3.9282782000000003,
                38.9868703
            ],
            [
                -3.9281011000000006,
                38.98676190000001
            ],
            [
                -3.927859700000001,
                38.98696619999996
            ],
            [
                -3.927954,
                38.98705169999999
            ],
            [
                -3.9279771,
                38.98702969999997
            ],
            [
                -3.9280001,
                38.987044799999985
            ],
            [
                -3.9279753000000004,
                38.987070899999985
            ],
            [
                -3.9280674,
                38.98714660000001
            ],
            [
                -3.9282461000000004,
                38.9871521
            ],
            [
                -3.9282514,
                38.987112200000006
            ],
            [
                -3.9282302000000002,
                38.98711079999999
            ],
            [
                -3.9282302000000002,
                38.98707919999999
            ],
            [
                -3.9282601999999995,
                38.98707919999999
            ],
            [
                -3.9282613,
                38.98706709999998
            ],
            [
                -3.9282763000000003,
                38.98689179999999
            ],
            [
                -3.9282782000000003,
                38.9868703
            ]
        ],
        "flatCoordinates": [
            [
                -437293.9289183173,
                4719791.030174255
            ],
            [
                -437274.2142364978,
                4719775.505696683
            ],
            [
                -437247.34171142033,
                4719804.764487422
            ],
            [
                -437257.83913940215,
                4719817.009380864
            ],
            [
                -437260.41061963944,
                4719813.858646634
            ],
            [
                -437262.9709679277,
                4719816.021195931
            ],
            [
                -437260.210244556,
                4719819.759113353
            ],
            [
                -437270.46276965813,
                4719830.600513826
            ],
            [
                -437290.3555626628,
                4719831.38819859
            ],
            [
                -437290.945555964,
                4719825.673905042
            ],
            [
                -437288.58558275923,
                4719825.47340357
            ],
            [
                -437288.58558275923,
                4719820.947800025
            ],
            [
                -437291.925167483,
                4719820.947800025
            ],
            [
                -437292.0476189229,
                4719819.214895405
            ],
            [
                -437293.7174112848,
                4719794.109293942
            ],
            [
                -437293.9289183173,
                4719791.030174255
            ]
        ],
        "consumption": [
            5.4,
            4.9,
            4.0,
            3.2,
            2.7,
            2.5,
            2.1,
            2.3,
            2.5,
            2.4,
            2.0,
            1.5,
            1.9,
            2.5,
            3,
            2.4,
            2.3,
            2.2,
            2.7,
            3.1,
            3.5,
            4.3,
            5,
            5.6
        ]
    }
}

const reducer = (state = initialState, action) => {
    switch (action.type) {
        case UPDATE_BUILDING_TYPE: {
            let stateCloned = _.cloneDeep(state);
            stateCloned[action.building_id].type = action.building_type;
            return stateCloned;
        }
        case UPDATE_BUILDING_ADDRESS: {
            let stateCloned = _.cloneDeep(state);
            stateCloned[action.building_id].address = action.building_address;
            return stateCloned;
        }
        case UPDATE_BUILDING_CONSUMPTION: {
            let stateCloned = _.cloneDeep(state);
            stateCloned[action.building_id].consumption[action.hour] = action.value;
            return stateCloned;
        }
        case ADD_BUILDING: {
            let stateCloned = _.cloneDeep(state);
            stateCloned[action.building_id] = action.building_data;
            return stateCloned;
        }
        case REMOVE_BUILDING: {
            let stateCloned = _.cloneDeep(state);
            delete stateCloned[action.building_id];
            return stateCloned;
        }
        case ADD_TRANSACTION: {
            let stateCloned = _.cloneDeep(state);
            debugger;
            stateCloned[action.sender].transactions[action.timestamp] = [action.receiver, -action.energy];
            stateCloned[action.receiver].transactions[action.timestamp] = [action.sender, action.energy];
            return stateCloned;
        }
        default:
            return state;
    }

};


export default reducer;